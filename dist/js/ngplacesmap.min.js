!function(){"use strict";var a=function(a,b,c){try{var d=a.geometry.location.A,e=a.geometry.location.F;return new google.maps.LatLng(d,e)}catch(f){return new google.maps.LatLng(b.lat,b.lng)}};angular.module("ngPlacesMap",[]).filter("gps",function(){return function(a,b){var c;try{c=JSON.parse(a)}catch(d){c=!1}return c&&c[b]?c[b]:""}}).directive("placesMap",function(){return{restrict:"E",replace:!0,scope:{customCallback:"&?",picked:"=?",address:"=?",fallback:"=?",mapType:"@?",readonly:"@?",responsive:"@?",draggable:"@?"},controller:["$scope",function(a){}],template:'<div class="dp-places-map-wrapper"><input type="text" class="dp-places-map-input"><div class="dp-places-map-canvas"></div></div>',link:function(b,c,d,e){var f={zoom:5},g={};b.address&&(g=b.address,f.zoom=b.address.zoom||15);var h={};h.lat=41.87194,h.lng=12.567379999999957,b.fallback&&(h=b.fallback,f.zoom=b.fallback.zoom||5),b.draggable&&"false"==b.draggable&&(f.draggable=!1,f.scrollwheel=!1),b.mapType&&google.maps.MapTypeId[b.mapType]&&(f.mapTypeId=google.maps.MapTypeId[b.mapType]),f.center=a(g,h);var i=c.find("div")[0],j=c.find("input")[0];b.responsive&&"true"==b.responsive&&(i.className+=" responsive");var k=new google.maps.Map(i,f),l=new google.maps.Marker({map:k,anchorPoint:new google.maps.Point(0,-29)}),m=new google.maps.InfoWindow;b.readonly?j.style.display="none":k.controls[google.maps.ControlPosition.TOP_LEFT].push(j);var n=new google.maps.places.Autocomplete(j);n.bindTo("bounds",k);var o=function(a){if(!a.geometry)return void alert("Pick a valid location");a.geometry.viewport?k.fitBounds(a.geometry.viewport):(k.setCenter(a.geometry.location),k.setZoom(b.address&&b.address.zoom?b.address.zoom:15)),l.setIcon({url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),l.setPosition(a.geometry.location),l.setVisible(!0);var c="";a.address_components&&(c=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" ")),""!==c&&(m.setContent("<div><strong>"+a.name+"</strong><br>"+c+"</div>"),m.open(k,l)),b.picked=a,b.customCallback({pickedPlace:a}),b.$apply()},p=function(){m.close(),l.setVisible(!1);var a=n.getPlace();o(a)},q=new google.maps.places.PlacesService(k);g.place_id&&q.getDetails({placeId:g.place_id},function(a,b){b===google.maps.places.PlacesServiceStatus.OK&&o(a)}),google.maps.event.addListener(n,"place_changed",p),google.maps.event.addDomListener(window,"resize",function(){var a=k.getCenter();google.maps.event.trigger(k,"resize"),k.setCenter(a)})}}})}();